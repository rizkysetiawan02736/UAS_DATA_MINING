# -*- coding: utf-8 -*-
"""diabetes_prediction.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1KoZBFfG5bQ_d5br05ZSZbVTARdXN5aCR
"""

import pandas as pd

data = pd.read_csv('diabetes_prediction_dataset1&2_comb.csv')
data.head(10)

data.info()

atr_data = data.drop(columns='diabetes')
atr_data.head()

cls_data = data['diabetes']
cls_data.head()

from sklearn.model_selection import train_test_split
from sklearn.metrics import accuracy_score, confusion_matrix, classification_report
from sklearn.tree import DecisionTreeClassifier

xtrain, xtest, ytrain, ytest = train_test_split(atr_data, cls_data, test_size=0.2, random_state=500)
tree_data = DecisionTreeClassifier(random_state=500)
tree_data.fit(xtrain, ytrain)

print("Nilai akurasi pada data testing:", tree_data.score(xtest,ytest))

from sklearn.tree import export_graphviz
export_graphviz(tree_data, out_file="tree_diabetes.dot", class_names=["1", "0"],
                feature_names=atr_data.columns, impurity=False, filled=True)

import graphviz

with open("tree_diabetes.dot") as fig:
  dot_graph = fig.read()
graphviz.Source(dot_graph)